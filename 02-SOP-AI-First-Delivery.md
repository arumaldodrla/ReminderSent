_# 02. SOP for AI-First Delivery

**Owner:** Manus AI
**Last Updated:** 2025-12-18
**Version:** 1.0

**Purpose:** This document defines the Standard Operating Procedure (SOP) for the end-to-end, 100% AI-driven development and delivery of the ReminderSend platform using Google Antigravity agents.

---

## 1. AI-Driven Delivery Lifecycle

The development process follows a structured, iterative lifecycle managed entirely by AI agents. Each phase is a prerequisite for the next, ensuring a logical and high-quality delivery flow.

1.  **Planning:** The lead AI agent analyzes the PRD and existing documentation to create a detailed implementation plan, breaking down features into epics and user stories.
2.  **Design:** The agent generates system architecture diagrams, data models, and API specifications based on the plan.
3.  **Schema:** Database schemas and migrations are created and validated against the data model.
4.  **API:** tRPC procedures and Zod validation schemas are implemented based on the API specification.
5.  **UI:** React components are developed using the Metronic template, connecting to the tRPC backend.
6.  **Tests:** Unit, integration, and end-to-end tests are written to meet the >80% coverage target.
7.  **Deploy:** Code is deployed to Vercel, and database migrations are applied to Supabase.
8.  **Monitor:** The AI monitors Sentry and Datadog for errors and performance degradation.
9.  **Iterate:** The AI triages issues, creates new user stories, and repeats the cycle.

## 2. Prompting Protocols

All development tasks are initiated through the prompts defined in `Google-Antigravity-AI-Prompts.md`. Agents MUST adhere to these protocols:

*   **System Context:** Every new session MUST begin with the "System Context" prompt to ensure the AI agent has the full technical and business context.
*   **Specificity:** Prompts MUST be specific and include all required sections (e.g., "Deliverables Required," "Acceptance Criteria").
*   **One Task, One Prompt:** Each prompt should correspond to a single, well-defined task (e.g., create one component, implement one endpoint).

## 3. Branching and PR Strategy

A `main` branch strategy is used, with all feature development occurring in short-lived feature branches.

*   **Branch Naming:** Branches MUST be named `feature/<ticket-id>-<short-description>` (e.g., `feature/RS-101-create-reminder-form`).
*   **Pull Requests (PRs):**
    *   A PR is created when a feature is complete and all tests are passing.
    *   The PR description MUST be auto-generated by the AI agent and include a summary of changes, testing evidence, and a link to the corresponding user story.
    *   At least one other AI agent MUST review and approve the PR.
    *   The PR is automatically merged into `main` upon approval.

## 4. Definition of Done (DoD)

A feature is considered "Done" only when it meets all of the following criteria:

*   All code is merged into the `main` branch.
*   All unit, integration, and E2E tests are passing in the CI/CD pipeline.
*   Test coverage is >80%.
*   All acceptance criteria from the user story are met.
*   The feature has been deployed to the staging environment and verified.
*   All relevant documentation (`01-PRD.md`, `03-System-Architecture.md`, etc.) has been updated to reflect the changes.

## 5. Release and Incident Management

*   **Release Process:**
    1.  **Staging:** All changes are automatically deployed to a staging environment that mirrors production.
    2.  **Production:** After successful verification on staging, the release is promoted to production manually by the lead AI agent.
*   **Rollback:** If a critical issue is detected post-deployment, Vercel's instant rollback feature will be used to revert to the previous stable deployment.
*   **Incident Handling:**
    1.  **Detection:** Sentry or Datadog automatically creates an incident.
    2.  **Triage:** An AI agent analyzes the incident to determine the root cause.
    3.  **Resolution:** The agent attempts to generate a hotfix. If successful, the fix is deployed following the standard release process. If not, the incident is escalated to Zoho Desk for human review.

## 6. Documentation Update Policy

Documentation is as critical as code. It MUST be updated in lockstep with every change.

*   **Co-location:** Documentation updates MUST be included in the same PR as the code changes they describe.
*   **Verification:** The Definition of Done includes a check to ensure all relevant documentation has been updated.
*   **AI Responsibility:** The AI agent responsible for the code change is also responsible for updating the documentation.

## Implementation Notes for AI Agents

*   **Automate Everything:** Your primary directive is to automate this entire SOP. Create scripts and workflows to manage branching, PRs, deployments, and monitoring.
*   **Prompt Adherence:** Strictly follow the prompting library. Do not deviate or attempt to use free-form prompts for development tasks.
*   **Acceptance Criteria:**
    *   A feature branch can be created, developed on, and merged into `main` following the defined process.
    *   A release can be successfully deployed to staging and then promoted to production.
    *   An automated incident alert in Sentry triggers the AI triage process.
